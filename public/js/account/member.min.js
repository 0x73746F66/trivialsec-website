window.choices_rendered={};const memberAction=async()=>{const cid=document.getElementById("assigned_roles").dataset.cid;cid in choices_rendered||toast("error","Problem encountered gathering assigned roles, please try refreshing the page");const json=await Api.post_async("/v1/organisation/member",{member_id:document.querySelector("section[data-member-id]").dataset.memberId,email:document.getElementById("member_email").value,roles:choices_rendered[cid].getValue().map((i=>i.value))}).catch((()=>toast("error","An unexpected error occurred. Please refresh the page and try again.")));"success"!=json.status||json.message||(json.message="No changes",json.status="info"),toast(json.status,json.message)};document.addEventListener("DOMContentLoaded",(async()=>{sidebar(),livetime(),setInterval(livetime,1e3);for await(const el of document.querySelectorAll("select")){const cid="".random();el.setAttribute("data-cid",cid);const unique=[],choices=[];for await(const option of Array.from(el.options))unique.includes(option.value)||(unique.push(option.value),choices.push({label:option.textContent,value:option.value}));choices_rendered[cid]=new Choices(el,{searchEnabled:!0,duplicateItemsAllowed:!1}).clearChoices().setChoices(choices)}const memberBtnEl=document.getElementById("member-button");memberBtnEl.addEventListener("click",memberAction,!1),memberBtnEl.addEventListener("touchstart",memberAction,!!supportsPassive&&{passive:!0})}),!1);