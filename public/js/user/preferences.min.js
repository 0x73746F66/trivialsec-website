const save_email=async event=>{if(event.key&&"Enter"!==event.key)return;event.preventDefault();const emailEl=document.getElementById("email");emailEl.classList.remove("error"),emailEl.classList.remove("success");const new_email=emailEl.value,json=await PublicApi.post({target:"/account/update-email",body:{new_email:new_email}});emailEl.classList.add(json.status),toast(json.status,json.message)};document.addEventListener("DOMContentLoaded",(async()=>{"/me"!=location.pathname&&history.pushState({},document.title,"/me");const emailChangeEl=document.getElementById("email");emailChangeEl.addEventListener("change",save_email,!1),emailChangeEl.addEventListener("keypress",save_email,!1)}),!1);