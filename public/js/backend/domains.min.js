const addDomain=async()=>{const domain_el=document.getElementById("domain_search_input"),project_el=document.getElementById("project_select"),json=await Api.post_async("/domains",{domain:domain_el.value,project_id:project_el.value}).catch((()=>toast("error","An unexpected error occurred. Please refresh the page and try again.")));if(toast(json),"id"in json.domain){let tr=`<tr class="highlight" data-domain-id="${json.domain.id}">\n        <td><input type="checkbox" name="table_domains" value="${json.domain.id}"></td>\n        <td><a href="/scope/${json.domain.project_id}">${json.project.name}</a></td>\n        <td><a href="/domain/1">${json.domain.name}</a></td>\n        <td>None 0 (0bytes)</td>\n        <td>None</td>\n        <td>None</td>\n        <td></td>\n        <td>Ensure the DNS TXT record includes:<br><pre>trivialsec=${json.domain.verification_hash}</pre></td>\n        <td>None</td>\n    </tr>`;document.querySelector("#domains-list tbody").insertAdjacentHTML("beforeend",tr)}},searchDomain=async event=>{const domain_name=event.currentTarget.value,json=await Api.get_async(`/domains/search/${domain_name}`).catch((()=>toast("error","An unexpected error occurred. Please refresh the page and try again."))),el=document.getElementById("add_domain");if(json.hasOwnProperty("id")&&json.id){const row=document.querySelector(`[data-domain-id="${json.id}"]`);row&&(row.classList.add("flash-row"),setTimeout((()=>row.classList.remove("flash-row")),2e3)),toast("warning",`${domain_name} is already registered`),el.disabled=!0}else toast(json),el.disabled=!1};document.addEventListener("DOMContentLoaded",(()=>{}),!1);