const saveFields=async()=>{const confirmation_url=document.getElementById("confirmation_url").value,password1=document.getElementById("new_password").value,password2=document.getElementById("repeat_password").value;if(password1!=password2)return void appMessage("error","Passwords do not match");const json=await Api.post_async("/v1/confirm-password",{recaptcha_token:recaptcha_token,confirmation_url:confirmation_url,password1:password1,password2:password2}).catch((()=>appMessage("error","An unexpected error occurred. Please refresh the page and try again.")));appMessage(json.status,json.message),"error"==json.status&&await refresh_recaptcha_token("invitation_action"),"success"==json.status&&setTimeout((()=>{window.location.href="/"}),5e3)};document.addEventListener("DOMContentLoaded",(()=>{"/invitation"!=location.pathname&&history.pushState({},document.title,"/invitation");const el=document.getElementById("save_password");el.addEventListener("click",saveFields,!1),el.addEventListener("touchstart",saveFields,!!supportsPassive&&{passive:!0})}),!1);