app.recaptchaSiteKey&&grecaptcha.ready((()=>{refresh_recaptcha_token("register_action")}));const register_action=async e=>{e.preventDefault();const token=document.getElementById("recaptcha_token").value,alias=document.querySelector("#company_name").value,email=document.querySelector("#email").value,password=document.querySelector("#password").value,password2=document.querySelector("#password2").value;email||appMessage("info","An email address must be provided"),password&&password2&&password2===password||appMessage("warning","Password do not match");const response=await fetch("/register",{credentials:"omit",method:"POST",body:JSON.stringify({alias:alias,email:email,password:password,password2:password2,recaptcha_token:token}),headers:{"Content-Type":"application/json"}}).catch((err=>{appMessage("error","An unexpected error occurred. Please refresh the page and try again."),console.log(err)})),json=await response.json();if(json){if(appMessage(json.status,json.message),"retry"==json.status)return refresh_recaptcha_token("register_action"),await register_action(e);if("success"==json.status)return void setTimeout((()=>{window.location.href="/login"}),5e3)}refresh_recaptcha_token("register_action")};document.addEventListener("DOMContentLoaded",(()=>{"/register"!=location.pathname&&history.pushState({},document.title,"/register");const register_btn=document.getElementById("register_btn");register_btn.addEventListener("click",register_action,!1),register_btn.addEventListener("touchstart",register_action,!!supportsPassive&&{passive:!0})}),!1);