const register_action=async e=>{e.preventDefault();const alias=document.querySelector("#company_name").value,email=document.querySelector("#email").value,password=document.querySelector("#password").value,password2=document.querySelector("#password2").value;email||appMessage("info","An email address must be provided"),password&&password2&&password2===password||appMessage("warning","Password do not match");const response=await fetch("/register",{credentials:"omit",method:"POST",body:JSON.stringify({alias:alias,email:email,password:password,password2:password2,recaptcha_token:token}),headers:{"Content-Type":"application/json"}}),json=await response.json();json&&(appMessage(json.status,json.message),"success"==json.status)?setTimeout((()=>{window.location.href="/login"}),5e3):await refresh_recaptcha_token("register_action")};document.addEventListener("DOMContentLoaded",(()=>{"/register"!=location.pathname&&history.pushState({},document.title,"/register");const register_btn=document.getElementById("register_btn");register_btn.addEventListener("click",register_action,!1),register_btn.addEventListener("touchstart",register_action,!!supportsPassive&&{passive:!0})}),!1);